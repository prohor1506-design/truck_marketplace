@echo off
chcp 65001 >nul
title üöö –ë–∏—Ä–∂–∞ –≥—Ä—É–∑–æ–ø–µ—Ä–µ–≤–æ–∑–æ–∫ - Telegram Bot
color 0A

echo ==================================================
echo ü§ñ  –ë–ò–†–ñ–ê –ì–†–£–ó–û–ü–ï–†–ï–í–û–ó–û–ö –ò –°–ü–ï–¶–¢–ï–•–ù–ò–ö–ò
echo üì±  –ë–æ—Ç: @autocenter_garage_bot
echo üìÖ  –î–∞—Ç–∞: %date% %time%
echo ==================================================
echo.

echo –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π...
python --version >nul 2>&1
if errorlevel 1 (
    echo ‚ùå Python –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–ª–∏ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ PATH
    echo –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python 3.8+ —Å —Å–∞–π—Ç–∞ python.org
    pause
    exit /b 1
)

echo –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞ .env...
if not exist ".env" (
    echo ‚ùå –§–∞–π–ª .env –Ω–µ –Ω–∞–π–¥–µ–Ω!
    echo –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏:
    echo BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
    echo ADMIN_ID=–≤–∞—à_id_—Ç–µ–ª–µ–≥—Ä–∞–º
    pause
    exit /b 1
)

echo –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫...
pip list | findstr "aiogram" >nul
if errorlevel 1 (
    echo ‚ùå Aiogram –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é...
    pip install -r requirements.txt
)

echo.
echo ‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã
echo üöÄ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞...
echo.

python main.py

if errorlevel 1 (
    echo.
    echo ‚ùå –ë–æ—Ç –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π
    echo –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞
)

pause